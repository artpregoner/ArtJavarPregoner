<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="artjavarpregoner" content="HTML, CSS, JavaScript" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <link rel="stylesheet" href="style.css" />
    <title>??.??</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />
</head>

<body>
    <nav class="navbar bg-body-tertiary fixed-top">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar"
                aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <a class="navbar-brand" href="#">Navbar</a>
            <div class="user-dropdown dropdown">
                <img src="https://cdn-icons-png.flaticon.com/512/6858/6858504.png" class="user-image" alt="User">
                <a href="#" class="btn btn-secondary dropdown-toggle" id="dropdownUser" data-bs-toggle="dropdown"
                    aria-expanded="false">
                    <span class="user-name d-none d-md-inline">Art Pregoner</span>
                </a>
                <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="dropdownUser">
                    <li><a class="dropdown-item" href="#"><i class="fas fa-user me-2"></i>Profile</a></li>
                    <li><a class="dropdown-item" href="#"><i class="fas fa-cog me-2"></i>Settings</a></li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li><a class="dropdown-item" href="#"><i class="fas fa-sign-out-alt me-2"></i>Sign out</a></li>
                </ul>
            </div>
            <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar"
                aria-labelledby="offcanvasNavbarLabel">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Offcanvas</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <ul class="navbar-nav justify-content-start flex-grow-1 pe-3">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="#">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Link</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                                aria-expanded="false">
                                Dropdown
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#">Action</a></li>
                                <li><a class="dropdown-item" href="#">Another action</a></li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li><a class="dropdown-item" href="#">Something else here</a></li>
                            </ul>
                        </li>
                    </ul>
                    <form class="d-flex mt-3" role="search">
                        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                        <button class="btn btn-outline-success" type="submit">Search</button>
                    </form>
                </div>
            </div>
        </div>
    </nav>
    <!-- <div class="collapse" id="navbarToggleExternalContent" data-bs-theme="dark">
        <div class="bg-dark p-4">
            <div class="topnav">
                <div class="socials">
                    <a href="https://facebook.com/artjavarpregoner/" class="large"><i class="fa fa-facebook-square"
                            aria-hidden="true"></i></a>
                    <a href="https://youtube.com/artjavarpregoner/" class="large"><i class="fa fa-youtube-square"
                            aria-hidden="true"></i></a>
                    <a href="https://instagram.com/artjavarpregoner/" class="large"><i class="fa fa-instagram"
                            aria-hidden="true"></i></a>
                    <a href="https://x.com/artpregoner/" class="large"><i class="fa fa-twitter"
                            aria-hidden="true"></i></a>
                    <a href="https://github.com/artpregoner/" class="large"><i class="fa fa-github"
                            aria-hidden="true"></i></a>
                </div>
                <div class="menu">
                    <a href="index.html" class="small">Home</a>
                    <a href="index.html" class="small">Contact</a>
                </div>
            </div>
        </div>
    </div> -->
    <nav class="navbar navbar-dark bg-dark">
        <div class="container-fluid">
            <button class="navbar-toggler d-flex" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent"
                aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div class="container mt-3">
        <h2>Approved Claims</h2>
        <p>List of Approved Claims</p>
        <div id="loading" class="text-center">
            <div class="spinner-border" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p>Fetching approved claims...</p>
        </div>
        <div class="table-responsive-xxl">
            <table id="claimsTable" class="table table-light table-hover" style="display: none;">
                <thead class="table-dark">
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Expense Date</th>
                        <th>Description</th>
                        <th>Amount</th>
                        <th>Currency</th>
                        <th>Payroll Status</th>
                    </tr>
                </thead>
                <tbody id="claimsBody">
                    <!-- Claims data will be inserted here -->
                </tbody>
            </table>
        </div>
        <div id="errorMessage" class="alert alert-danger" style="display: none">
            Error loading claims data. Please try again later.
        </div>
    </div>
    <script src="js.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // API endpoint and token
            const apiUrl = "https://hr2.fareastcafeshop.com/api/claims/approved";
            const token = "1|0qHzOZokGWCYs3nzJfXDYXHT3HQWwxCLCvj2vn06cc076ff3";

            // Fetch data from API
            fetch(apiUrl, {
                method: "GET",
                headers: {
                    Authorization: `Bearer ${token}`,
                    "Content-Type": "application/json",
                },
            })
                .then((response) => {
                    if (!response.ok) {
                        throw new Error("Network response was not ok");
                    }
                    return response.json();
                })
                .then((data) => {
                    // Hide loading indicator
                    document.getElementById("loading").style.display = "none";

                    // Show table
                    document.getElementById("claimsTable").style.display = "table";

                    // Get table body element
                    const tableBody = document.getElementById("claimsBody");

                    // Check if data has claims
                    if (data.claims && data.claims.length > 0) {
                        // Populate table with claims data
                        data.claims.forEach((claim) => {
                            const row = document.createElement("tr");

                            // Format date to be more readable
                            const expenseDate = new Date(
                                claim.expense_date
                            ).toLocaleDateString();

                            // Create row
                            row.innerHTML = `
                            <td>${claim.id}</td>
                            <td>${claim.user.name}</td>
                            <td>${expenseDate}</td>
                            <td>${claim.description}</td>
                            <td>${parseFloat(claim.total_amount).toFixed(
                                2
                            )}</td>
                            <td>${claim.currency}</td>
                            <td>${claim.payroll_status}</td>
                        `;

                            tableBody.appendChild(row);
                        });
                    } else {
                        // No claims found
                        const row = document.createElement("tr");
                        row.innerHTML =
                            '<td colspan="7" class="text-center">No approved claims found</td>';
                        tableBody.appendChild(row);
                    }
                })
                .catch((error) => {
                    // Hide loading indicator
                    document.getElementById("loading").style.display = "none";

                    // Show error message
                    document.getElementById("errorMessage").style.display = "block";
                    document.getElementById("errorMessage").innerText =
                        "Error: " + error.message;

                    console.error("Error fetching claims:", error);
                });
        });
    </script>
</body>

</html>